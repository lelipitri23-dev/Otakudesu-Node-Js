<%- include('partials/header', { page: page }) %>

<main class="flex-1 w-full min-w-0 flex items-center justify-center min-h-[60vh]">
  <article class="w-full max-w-md bg-card rounded-xl shadow-2xl border border-[#33303f] overflow-hidden p-8">
    
    <div class="text-center mb-6">
      <h1 class="text-base md:text-lg font-bold text-[var(--text-main)] uppercase border-l-4 border-primary pl-3 leading-tight">Login</h1>
      <p class="text-sm text-gray-500">Silakan masuk ke akun Anda</p>
    </div>

    <% if (typeof error !== 'undefined' && error) { %>
      <div class="bg-red-500/10 border border-red-500 text-red-500 text-sm p-3 rounded mb-6 text-center">
        <%= error %>
      </div>
    <% } %>

    <form id="loginForm" action="/login" method="POST" class="space-y-4">
      <div>
        <label for="username" class="block text-xs font-bold text-[var(--text-main)] uppercase mb-1">Username</label>
        <input type="text" id="username" name="username" required 
          class="w-full bg-darker border border-[#33303f] text-[var(--text-main)] rounded p-3 focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary transition-all">
      </div>
      
      <div>
        <label for="password" class="block text-xs font-bold text-[var(--text-main)] mb-1">Password</label>
        <input type="password" id="password" name="password" required 
          class="w-full bg-darker border border-[#33303f] text-[var(--text-main)] rounded p-3 focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary transition-all">
      </div>

      <button 
        id="loginBtn"
        class="g-recaptcha w-full bg-primary hover:bg-primary-hover text-white font-bold py-3 rounded transition-all shadow-lg shadow-primary/20"
        data-sitekey="6LdQaBQsAAAAAKaM3wpYPrYQSiPFaj_JnVfob5Cn" 
        data-callback='onSubmit' 
        data-action='submit'>
        Masuk
      </button>
    </form>

    <p class="mt-6 text-center text-sm text-gray-500">
      Belum punya akun?
      <a href="/register" class="text-primary hover:underline font-bold">Daftar di sini</a>
    </p>
  </article>
</main>

<script src="https://www.google.com/recaptcha/api.js"></script>
<script>
   function onSubmit(token) {
     document.getElementById("loginForm").submit();
   }
</script>

<%- include('partials/sidebar', { page: page }) %>
<%- include('partials/footer', { page: page }) %>